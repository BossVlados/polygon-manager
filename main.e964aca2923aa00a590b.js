(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var s={},a=[],i=0;i<t.length;i++){var l=t[i],d=o.base?l[0]+o.base:l[0],c=s[d]||0,g="".concat(d," ").concat(c);s[d]=c+1;var u=n(g),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(h);else{var p=r(h,o);o.byIndex=i,e.splice(i,0,{identifier:g,updater:p,references:1})}a.push(g)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var s=o(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var i=n(s[a]);e[i].references--}for(var l=o(t,r),d=0;d<s.length;d++){var c=n(s[d]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}s=l}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},249:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(601),r=n.n(o),s=n(314),a=n.n(s)()(r());a.push([t.id,"* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    background-color: #f5f5f5;\n    color: #333;\n    line-height: 1.6;\n}\n\n#app {\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n}\n\n.app-header {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    padding: 1rem 2rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.app-header h1 {\n    font-size: 1.8rem;\n    font-weight: 600;\n}\n\n.controls {\n    display: flex;\n    gap: 1rem;\n}\n\n.controls button {\n    background: rgba(255, 255, 255, 0.2);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    color: white;\n    padding: 0.5rem 1rem;\n    border-radius: 6px;\n    cursor: pointer;\n    font-weight: 500;\n    transition: all 0.3s ease;\n}\n\n.controls button:hover {\n    background: rgba(255, 255, 255, 0.3);\n    transform: translateY(-1px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\n.controls button:active {\n    transform: translateY(0);\n}\n\n/* Buffer Zone Styles */\nbuffer-zone {\n    display: block;\n    background: #323232;\n    margin: 1rem;\n    border-radius: 8px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    overflow: hidden;\n    flex: 0 0 200px;\n}\n\nbuffer-zone.drag-over {\n    border: 2px dashed #4ECDC4;\n    background-color: #404040;\n}\n\n.zone-header {\n    background: #2a2a2a;\n    padding: 1rem;\n    border-bottom: 1px solid #404040;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    user-select: none;\n}\n\n.zone-header h2 {\n    font-size: 1.2rem;\n    color: #ffffff;\n}\n\n.polygon-count, .zoom-info {\n    font-size: 0.9rem;\n    color: #cccccc;\n    background: #404040;\n    padding: 0.25rem 0.5rem;\n    border-radius: 4px;\n}\n\n.zone-content {\n    padding: 1rem;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n    min-height: 120px;\n    max-height: 180px;\n    overflow-y: auto;\n}\n\n/* Work Zone Styles */\nwork-zone {\n    display: block;\n    background: #323232;\n    margin: 1rem;\n    border-radius: 8px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    overflow: hidden;\n    flex: 1;\n}\n\nwork-zone.drag-over {\n    border: 2px dashed #4ECDC4;\n    background-color: #404040;\n}\n\n.work-zone-container {\n    padding: 1rem;\n    height: calc(100% - 60px);\n    min-height: 400px;\n}\n\n.work-zone-svg {\n    width: 100%;\n    height: 100%;\n    border: 1px solid #404040;\n    border-radius: 4px;\n    background: #2a2a2a;\n    cursor: default;\n}\n\n/* Polygon Element Styles */\npolygon-element {\n    display: block;\n    background: white;\n    border: 2px solid #e9ecef;\n    border-radius: 6px;\n    padding: 0.5rem;\n    cursor: grab;\n    transition: all 0.3s ease;\n    user-select: none;\n}\n\npolygon-element:hover,\npolygon-element.hover {\n    border-color: #4ECDC4;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\npolygon-element.dragging {\n    opacity: 0.5;\n    transform: rotate(5deg);\n}\n\npolygon-element:active {\n    cursor: grabbing;\n}\n\n.polygon-preview {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n.polygon-info {\n    text-align: center;\n    font-size: 0.8rem;\n}\n\n.polygon-id {\n    color: #6c757d;\n    font-family: 'Courier New', monospace;\n}\n\n.polygon-vertices {\n    color: #495057;\n    font-weight: 500;\n}\n\n/* SVG Polygon Styles */\n.work-zone-svg polygon {\n    transition: all 0.2s ease;\n}\n\n.work-zone-svg polygon:hover {\n    stroke-width: 3;\n    filter: brightness(1.1);\n}\n\n.work-zone-svg .draggable-polygon {\n    cursor: grab;\n}\n\n.work-zone-svg .draggable-polygon:active {\n    cursor: grabbing;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .app-header {\n        flex-direction: column;\n        gap: 1rem;\n        text-align: center;\n    }\n    \n    .controls {\n        flex-wrap: wrap;\n        justify-content: center;\n    }\n    \n    #app {\n        margin: 0.5rem;\n    }\n    \n    buffer-zone, work-zone {\n        margin: 0.5rem;\n    }\n}\n\n/* Scrollbar Styling */\n.zone-content::-webkit-scrollbar {\n    width: 6px;\n}\n\n.zone-content::-webkit-scrollbar-track {\n    background: #404040;\n    border-radius: 3px;\n}\n\n.zone-content::-webkit-scrollbar-thumb {\n    background: #666666;\n    border-radius: 3px;\n}\n\n.zone-content::-webkit-scrollbar-thumb:hover {\n    background: #888888;\n}\n\n/* Loading Animation */\n@keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n}\n\n.loading {\n    animation: pulse 1.5s ease-in-out infinite;\n}",""]);const i=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(a[l]=!0)}for(var d=0;d<t.length;d++){var c=[].concat(t[d]);o&&a[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),e.push(c))}},e}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var s=e[o]={id:o,exports:{}};return t[o](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var o=n(72),r=n.n(o),s=n(825),a=n.n(s),i=n(659),l=n.n(i),d=n(56),c=n.n(d),g=n(540),u=n.n(g),h=n(113),p=n.n(h),f=n(249),y={};y.styleTagTransform=p(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=u(),r()(f.A,y),f.A&&f.A.locals&&f.A.locals;class m extends HTMLElement{constructor(){super(),this.polygons=[]}connectedCallback(){this.innerHTML='\n            <div class="zone-header" draggable="false">\n                <h2>Буферная зона</h2>\n                <span class="polygon-count">Полигонов: 0</span>\n            </div>\n            <div class="zone-content" id="buffer-content"></div>\n        ',this.content=this.querySelector("#buffer-content"),this.setupDropZone(),this.updateCounter()}setupDropZone(){this.addEventListener("dragover",(t=>{t.preventDefault(),this.classList.add("drag-over")})),this.addEventListener("dragleave",(t=>{this.contains(t.relatedTarget)||this.classList.remove("drag-over")})),this.addEventListener("drop",(t=>{t.preventDefault(),this.classList.remove("drag-over");const e=t.dataTransfer.getData("text/plain"),n=document.querySelector(`[data-polygon-id="${e}"]`);if(n&&!this.contains(n)){const t=JSON.parse(n.dataset.polygonData);this.addPolygon(t),n.remove();const e=document.getElementById("work-zone");e&&e.updateCounter()}}))}addPolygon(t){const e=document.createElement("polygon-element");e.setData(t),this.content.appendChild(e),this.polygons.push(t),this.updateCounter()}removePolygon(t){this.polygons=this.polygons.filter((e=>e.id!==t)),this.updateCounter()}getPolygonsData(){return Array.from(this.content.children).map((t=>JSON.parse(t.dataset.polygonData)))}updateCounter(){const t=this.querySelector(".polygon-count");if(t){const e=this.content.children.length;t.textContent=`Полигонов: ${e}`}}clear(){this.content.innerHTML="",this.polygons=[],this.updateCounter()}}customElements.define("buffer-zone",m);class v extends HTMLElement{constructor(){super(),this.scale=1,this.translateX=0,this.translateY=0,this.isPanning=!1,this.lastPanPoint={x:0,y:0},this.isDraggingPolygon=!1,this.draggedPolygon=null,this.dragOffset={x:0,y:0},this.lastMousePos={x:0,y:0}}connectedCallback(){this.innerHTML='\n            <div class="zone-header" draggable="false">\n                <h2>Рабочая зона</h2>\n                <span class="polygon-count">Полигонов: 0</span>\n                <span class="zoom-info">Масштаб: 100%</span>\n            </div>\n            <div class="work-zone-container">\n                <svg class="work-zone-svg" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">\n                    <defs>\n                        <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">\n                            <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#e0e0e0" stroke-width="1"/>\n                        </pattern>\n                    </defs>\n                    <rect width="100%" height="100%" fill="url(#grid)" />\n                    \n                    \x3c!-- X-axis scale --\x3e\n                    <g class="x-scale"></g>\n                    \x3c!-- Y-axis scale --\x3e\n                    <g class="y-scale"></g>\n                    \n                    \x3c!-- Content group for polygons --\x3e\n                    <g class="content-group" transform="translate(0,0) scale(1)"></g>\n                </svg>\n            </div>\n        ',this.svg=this.querySelector(".work-zone-svg"),this.contentGroup=this.querySelector(".content-group"),this.setupInteractions(),this.updateScales(),this.setupDropZone()}setupInteractions(){this.svg.addEventListener("wheel",(t=>{t.preventDefault();const e=t.deltaY>0?.9:1.1;this.scale*=e,this.scale=Math.max(.1,Math.min(5,this.scale)),this.updateTransform(),this.updateScales()})),this.svg.addEventListener("mousedown",(t=>{0!==t.button||this.isDraggingPolygon||(this.isPanning=!0,this.lastPanPoint={x:t.clientX,y:t.clientY},this.svg.style.cursor="grabbing")})),document.addEventListener("mousemove",(t=>{if(this.isPanning&&!this.isDraggingPolygon){const e=t.clientX-this.lastPanPoint.x,n=t.clientY-this.lastPanPoint.y;this.translateX+=e/this.scale,this.translateY+=n/this.scale,this.updateTransform(),this.lastPanPoint={x:t.clientX,y:t.clientY}}else if(this.isDraggingPolygon&&this.draggedPolygon){const e=t.clientX-this.lastMousePos.x,n=t.clientY-this.lastMousePos.y,o=e/this.scale,r=n/this.scale,s=JSON.parse(this.draggedPolygon.dataset.polygonData),a=(s.x||0)+o,i=(s.y||0)+r;this.draggedPolygon.setAttribute("transform",`translate(${a}, ${i})`),s.x=a,s.y=i,this.draggedPolygon.setAttribute("data-polygon-data",JSON.stringify(s)),this.lastMousePos={x:t.clientX,y:t.clientY}}})),document.addEventListener("mouseup",(()=>{this.isPanning=!1,this.isDraggingPolygon=!1,this.draggedPolygon=null,this.svg.style.cursor="default"}))}setupDropZone(){this.addEventListener("dragover",(t=>{t.preventDefault(),this.classList.add("drag-over")})),this.addEventListener("dragleave",(t=>{this.contains(t.relatedTarget)||this.classList.remove("drag-over")})),this.addEventListener("drop",(t=>{t.preventDefault(),this.classList.remove("drag-over");const e=t.dataTransfer.getData("text/plain"),n=document.querySelector(`polygon-element[data-polygon-id="${e}"]`);if(n&&!this.contains(n)){const e=JSON.parse(n.dataset.polygonData),o=this.svg.getBoundingClientRect(),r=(t.clientX-o.left-this.translateX*this.scale)/this.scale,s=(t.clientY-o.top-this.translateY*this.scale)/this.scale;e.x=r,e.y=s,this.addPolygon(e),n.remove();const a=document.getElementById("buffer-zone");a&&a.updateCounter()}}))}updateTransform(){this.contentGroup.setAttribute("transform",`translate(${this.translateX}, ${this.translateY}) scale(${this.scale})`);const t=this.querySelector(".zoom-info");t&&(t.textContent=`Масштаб: ${Math.round(100*this.scale)}%`)}updateScales(){const t=this.querySelector(".x-scale"),e=this.querySelector(".y-scale");t.innerHTML="",e.innerHTML="";const n=50/this.scale,o=this.getAdjustedStep(n);for(let e=0;e<=800;e+=o){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",e),n.setAttribute("y1",0),n.setAttribute("x2",e),n.setAttribute("y2",10),n.setAttribute("stroke","#666"),n.setAttribute("stroke-width","1"),t.appendChild(n);const o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("x",e),o.setAttribute("y",25),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size","12"),o.setAttribute("fill","#666"),o.textContent=Math.round(e),t.appendChild(o)}for(let t=0;t<=600;t+=o){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",0),n.setAttribute("y1",t),n.setAttribute("x2",10),n.setAttribute("y2",t),n.setAttribute("stroke","#666"),n.setAttribute("stroke-width","1"),e.appendChild(n);const o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("x",-5),o.setAttribute("y",t+4),o.setAttribute("text-anchor","end"),o.setAttribute("font-size","12"),o.setAttribute("fill","#666"),o.textContent=Math.round(t),e.appendChild(o)}}getAdjustedStep(t){return t<10?10:t<25?25:t<50?50:t<100?100:100*Math.round(t/100)}addPolygon(t){const e=document.createElementNS("http://www.w3.org/2000/svg","polygon");e.setAttribute("points",t.points),e.setAttribute("fill",t.color),e.setAttribute("stroke","#333"),e.setAttribute("stroke-width","2"),e.setAttribute("transform",`translate(${t.x||0}, ${t.y||0})`),e.setAttribute("data-polygon-id",t.id),e.setAttribute("data-polygon-data",JSON.stringify(t)),e.style.cursor="grab",e.classList.add("draggable-polygon"),e.addEventListener("mousedown",(t=>{t.stopPropagation(),this.isDraggingPolygon=!0,this.draggedPolygon=e,e.style.cursor="grabbing",this.lastMousePos={x:t.clientX,y:t.clientY}})),e.addEventListener("mouseup",(()=>{e.style.cursor="grab"})),e.addEventListener("mouseenter",(()=>{this.isDraggingPolygon||(e.setAttribute("stroke-width","3"),e.style.filter="brightness(1.1)")})),e.addEventListener("mouseleave",(()=>{this.isDraggingPolygon||(e.setAttribute("stroke-width","2"),e.style.filter="none")})),this.contentGroup.appendChild(e),this.updateCounter()}getPolygonsData(){return Array.from(this.contentGroup.children).map((t=>JSON.parse(t.dataset.polygonData)))}updateCounter(){const t=this.querySelector(".polygon-count");if(t){const e=this.contentGroup.children.length;t.textContent=`Полигонов: ${e}`}}clear(){this.contentGroup.innerHTML="",this.scale=1,this.translateX=0,this.translateY=0,this.updateTransform(),this.updateScales(),this.updateCounter()}}customElements.define("work-zone",v);class b extends HTMLElement{constructor(){super(),this.polygonData=null}connectedCallback(){this.draggable=!0,this.setupDragAndDrop()}setData(t){this.polygonData=t,this.dataset.polygonId=t.id,this.dataset.polygonData=JSON.stringify(t),this.render()}render(){this.polygonData&&(this.innerHTML=`\n            <div class="polygon-preview">\n                <svg width="80" height="80" viewBox="0 0 80 80">\n                    <polygon \n                        points="${this.polygonData.points}" \n                        fill="${this.polygonData.color}" \n                        stroke="#333" \n                        stroke-width="1"\n                        transform="translate(40,40) scale(0.3)"\n                    />\n                </svg>\n                <div class="polygon-info">\n                    <div class="polygon-id">ID: ${this.polygonData.id.slice(0,8)}</div>\n                    <div class="polygon-vertices">${this.polygonData.vertices} вершин</div>\n                </div>\n            </div>\n        `)}setupDragAndDrop(){this.addEventListener("dragstart",(t=>{t.dataTransfer.setData("text/plain",this.polygonData.id),this.classList.add("dragging")})),this.addEventListener("dragend",(()=>{this.classList.remove("dragging")})),this.addEventListener("mouseenter",(()=>{this.classList.add("hover")})),this.addEventListener("mouseleave",(()=>{this.classList.remove("hover")}))}}customElements.define("polygon-element",b);class x{constructor(){this.colors="#940024"}generatePolygons(t){const e=[];for(let n=0;n<t;n++){const t=Math.floor(8*Math.random())+3,n=this.generatePolygon(t);e.push(n)}return e}generatePolygon(t){return{id:this.generateId(),vertices:t,color:this.colors[Math.floor(Math.random()*this.colors.length)],points:this.generatePolygonPoints(t).map((t=>`${t.x},${t.y}`)).join(" "),x:0,y:0}}generatePolygonPoints(t){const e=[];for(let n=0;n<t;n++){const o=2*Math.PI*n/t,r=30+10*(Math.random()-.5),s=0+r*Math.cos(o),a=0+r*Math.sin(o);e.push({x:Math.round(s),y:Math.round(a)})}return e}generateId(){return Math.random().toString(36).substr(2,9)+Date.now().toString(36)}}class w{constructor(){this.polygonManager=new x,this.bufferZone=document.getElementById("buffer-zone"),this.workZone=document.getElementById("work-zone"),this.initEventListeners(),this.loadData()}initEventListeners(){document.getElementById("create-btn").addEventListener("click",(()=>{this.createPolygons()})),document.getElementById("save-btn").addEventListener("click",(()=>{this.saveData()})),document.getElementById("reset-btn").addEventListener("click",(()=>{this.resetData()}))}createPolygons(){const t=Math.floor(16*Math.random())+5;this.polygonManager.generatePolygons(t).forEach((t=>{this.bufferZone.addPolygon(t)}))}saveData(){const t={bufferPolygons:this.bufferZone.getPolygonsData(),workPolygons:this.workZone.getPolygonsData()};localStorage.setItem("polygonManagerData",JSON.stringify(t));const e=document.getElementById("save-btn"),n=e.textContent;e.textContent="Сохранено!",e.style.backgroundColor="#4CAF50",setTimeout((()=>{e.textContent=n,e.style.backgroundColor=""}),1500)}loadData(){const t=localStorage.getItem("polygonManagerData");if(t){const e=JSON.parse(t);e.bufferPolygons?.forEach((t=>{this.bufferZone.addPolygon(t)})),e.workPolygons?.forEach((t=>{this.workZone.addPolygon(t)}))}}resetData(){confirm("Вы уверены, что хотите сбросить все данные?")&&(localStorage.removeItem("polygonManagerData"),this.bufferZone.clear(),this.workZone.clear())}}document.addEventListener("DOMContentLoaded",(()=>{new w}))})();